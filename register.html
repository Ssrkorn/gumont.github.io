<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>สมัครสมาชิก - Gumont Restaurant</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="font-family: Noto Serif Thai">

<div class="container mt-5">
  <h2 class="text-center">สมัครสมาชิก</h2>
  
  <form id="register-form" class="mt-4">
    <div class="mb-3">
      <label for="username" class="form-label">ชื่อผู้ใช้</label>
      <input type="text" class="form-control" id="username" required>
    </div>

    <div class="mb-3">
      <label for="password" class="form-label">รหัสผ่าน</label>
      <input type="password" class="form-control" id="password" required>
    </div>

    <div class="mb-3">
      <label for="confirm-password" class="form-label">ยืนยันรหัสผ่าน</label>
      <input type="password" class="form-control" id="confirm-password" required>
    </div>

    <div class="mb-3">
      <label for="telephone" class="form-label">หมายเลขโทรศัพท์</label>
      <input type="text" class="form-control" id="telephone" required>
    </div>

    <button type="submit" class="btn btn-primary w-100">สมัครสมาชิก</button>
  </form>

  <p class="mt-3 text-center">มีบัญชีแล้ว? <a href="index.html">เข้าสู่ระบบ</a></p>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    // เมื่อผู้ใช้สมัครสมาชิก
    $('#register-form').on('submit', function(e) {
      e.preventDefault();

      let username = $('#username').val();
      let password = $('#password').val();
      let confirmPassword = $('#confirm-password').val();
      let telephone = $('#telephone').val();

      if (password !== confirmPassword) {
        alert('รหัสผ่านและยืนยันรหัสผ่านไม่ตรงกัน');
        return;
      }

      // เก็บข้อมูลผู้ใช้ใน localStorage
      let users = JSON.parse(localStorage.getItem('users')) || [];
      let existingUser = users.find(user => user.username === username);

      if (existingUser) {
        alert('ชื่อผู้ใช้นี้มีอยู่แล้ว');
      } else {
        users.push({ username, password, telephone });
        localStorage.setItem('users', JSON.stringify(users));
        alert('สมัครสมาชิกสำเร็จ');
        window.location.href = 'index.html'; // ไปยังหน้า Login หลังจากสมัคร
      }
    });
  });
</script>

</body>
</html>
